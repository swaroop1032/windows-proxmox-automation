{
  "variables": {
    "proxmox_api_url": "https://{{env `PROXMOX_HOST`}}:8006/api2/json",
    "proxmox_username": "{{env `PROXMOX_USER`}}",
    "proxmox_password": "{{env `PROXMOX_PASS`}}",
    "proxmox_node": "pve",
    "iso_file": "local:iso/Win11-Custom.iso",
    "vm_name": "win11-template",
    "vm_id": "9000"
  },
  "builders": [
    {
      "type": "proxmox",
      "proxmox_url": "{{user `proxmox_api_url`}}",
      "username": "{{user `proxmox_username`}}",
      "password": "{{user `proxmox_password`}}",
      "node": "{{user `proxmox_node`}}",
      "vm_id": "{{user `vm_id`}}",
      "vm_name": "{{user `vm_name`}}",
      "memory": 8192,
      "cores": 4,
      "disk_size": "80G",
      "iso_file": "{{user `iso_file`}}",
      "boot_wait": "5s",
      "boot_command": [],
      "ssh_username": "Administrator",
      "ssh_password": "Windows123!",
      "shutdown_command": "shutdown /s /t 5 /f",
      "template_name": "win11-golden-template",
      "template_description": "Windows 11 Template built with Packer"
    }
  ],
  "provisioners": [
    {
      "type": "powershell",
      "scripts": [
        "scripts/winrm.ps1",
        "scripts/virtio-drivers.ps1",
        "scripts/sysprep.ps1"
      ]
    }
  ]
}
